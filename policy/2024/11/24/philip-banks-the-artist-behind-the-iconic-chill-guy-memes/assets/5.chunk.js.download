(this.webpackJsonp=this.webpackJsonp||[]).push([[5],{942:function(e,t,r){"use strict";r.r(t);var n=r(8),i=r(1),a=r.n(i),s=r(3),o=r(291),l=r(24),c=r(7),p=r(82),u=r(40),d=r(70),b=r(5),f=r(64),m=r(89),g=r(114),j=r(65),y=r(2),O=r.n(y),h=r(21),v=r(12);const w=v.a.success.main,x=v.a.text.primary,S=(O.a.div.withConfig({displayName:"article-sign-up-modulestyles__Wrapper",componentId:"sc-1rs9f0f-0"})(["padding-bottom:40px;"]),O.a.div.withConfig({displayName:"article-sign-up-modulestyles__FormWrapper",componentId:"sc-1rs9f0f-1"})(["padding:40px 20px;margin-top:40px;border:1px solid ",";a,a:visited{color:",";}"],(({theme:e})=>e.palette.action.disabled),(({theme:e})=>e.palette.success.main))),P=O.a.div.withConfig({displayName:"article-sign-up-modulestyles__WidgetHeader",componentId:"sc-1rs9f0f-2"})(["display:flex;gap:0 20px;align-items:center;margin-bottom:25px;",'{justify-content:center;}a,span{display:inline-flex;align-items:center;&:last-child:before{content:"";width:1px;height:20px;margin-right:20px;background-color:',";}}> a{gap:0 5px;}"],(({theme:e})=>e.media.mobile),(({theme:e})=>e.palette.action.disabled)),_=O.a.div.withConfig({displayName:"article-sign-up-modulestyles__WidgetContent",componentId:"sc-1rs9f0f-3"})(["margin-bottom:30px;p{margin-top:10px;}a{","{display:flex;flex-wrap:wrap;justify-content:center;}}"],(({theme:e})=>e.media.mobile)),C=O.a.form.withConfig({displayName:"article-sign-up-modulestyles__WidgetForm",componentId:"sc-1rs9f0f-4"})(["display:grid;grid-template-columns:1fr auto;margin-bottom:10px;"]),E=O()(h.a).withConfig({displayName:"article-sign-up-modulestyles__FormButton",componentId:"sc-1rs9f0f-5"})(["",""],(({success:e,theme:t})=>e&&Object(y.css)(["background-color:",";"],t.palette.success.main)));var N=r(0);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const T=({newsletter:e,colors:t})=>{const[r,n]=Object(s.useState)({value:"",isValid:!1}),[i,a]=Object(s.useState)(),{executeRecaptcha:o}=Object(p.b)(),{subscribe:l,ready:c}=Object(m.a)({lists:[e.title],source:g.a.ARTICLE_WIDGET,onSuccess:()=>{Object(f.f)(f.e,[e.title]),a("SUCCESS")},onError:()=>{alert("Error signing up. Please try again."),a("ERROR")}});Object(s.useEffect)((()=>{(async()=>{const e=Object(u.object)({email:Object(u.string)().email().required().max(254)});await e.isValid({email:r.value})&&n(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r,{isValid:!0}))})(),a("")}),[r.value]);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(P,{children:[Object(N.jsxs)(b.a,{as:"a",variant:"captionBold",href:"/newsletters/",children:["Newsletter ",Object(N.jsx)(j.a,{color:w})]}),Object(N.jsx)(b.a,{variant:"caption",children:e.frequency})]}),Object(N.jsxs)(_,{children:[Object(N.jsx)(b.a,{as:"a",variant:"h5",href:`/newsletters/${e.id}`,children:e.title.split(" ").map(((e,r)=>{var n;return Object(N.jsx)("span",{style:{color:null!==(n=null==t?void 0:t[r])&&void 0!==n?n:x,marginLeft:r>0&&"3px"},children:e},e)}))}),Object(N.jsxs)(b.a,{variant:"body2",children:["Sign up for ",e.title,", ",e.promo]})]}),Object(N.jsxs)(C,{onSubmit:async e=>{if(e.preventDefault(),c){const e=await o("newsletter_signup_banner");l(r.value,{},e)}},children:[Object(N.jsx)(d.a,{placeholder:"Enter your Email",name:"email",value:r.value,inputProps:{type:"email",required:!0},onChange:({target:e})=>{n({isValid:!1,value:e.value})}}),Object(N.jsx)(E,{variant:"contained",color:"primary",disabled:!r.isValid||"SUCCESS"===i,success:"SUCCESS"===i,children:Object(N.jsx)(b.a,{variant:"button2",children:"SUCCESS"===i?"Thanks":"Sign Up"})})]}),Object(N.jsxs)(b.a,{variant:"disclaimer",children:["By clicking ‘Sign Up’, you agree to receive newsletter from CoinDesk as well as other partner offers and accept our ",Object(N.jsx)("a",{href:"/terms/",children:"terms of services"})," and"," ",Object(N.jsx)("a",{href:"/privacy/",children:"privacy policy"}),"."]})]})};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}T.propTypes={newsletter:a.a.object,colors:a.a.array};const U=({customFields:e={}})=>{var t,r,i;const a=Object(c.a)("content",null),{settings:p={},pageType:u}=Object(c.f)(e),[d,b]=Object(s.useState)(),f=Object(l.b)(U,e),m=JSON.parse(p.newsletters),g=JSON.parse(p.sections),j=a?"/business"===a.taxonomy.primary_section._id?"/finance":a.taxonomy.primary_section._id:"Layer2"===u?"/layer2":"/consensus-magazine",{newsletters:y=[]}=null!==(t=Object(n.useContent)({source:"newsletter-form",query:{slug_list:null===(r=g[j])||void 0===r?void 0:r.join(",")}}))&&void 0!==t?t:{};return Object(s.useEffect)((()=>{if(d)return;const e=y.length>1?y[Math.floor(Math.random()*y.length)]:y[0];b(e)}),[]),d?Object(N.jsx)("div",V({"data-module-name":"newsletter-signup-banner"},f,{children:Object(N.jsx)(o.default,{children:Object(N.jsx)(S,{children:Object(N.jsx)(T,{newsletter:d,colors:null===(i=m[d.id])||void 0===i?void 0:i.colors})})})})):null};U.propTypes={customFields:a.a.shape(V({pageType:a.a.oneOf(["Article","Consensus Magazine","Layer2"]).tag({defaultValue:"Article",label:"Page type"}),settings_sections:a.a.disabled.tag({label:"Sections setup",description:"Select which newsletter should display on each section",defaultValue:"",formPlugin:"article-newsletter-sections"}),settings_newsletters:a.a.disabled.tag({label:"Newsletters title style",defaultValue:"",description:"Choose newsletters title colors",formPlugin:"article-newsletter-settings"})},Object(l.a)()))},U.displayName="Newsletter Article Sign up Module",U.label="Newsletter Article Sign up Module",U.lazy=!0;t.default=U}}]);